CREATE TABLE IF NOT EXISTS `match` (
	id INT AUTO_INCREMENT PRIMARY KEY,
	home_team_id INT,
	home_team_score TINYINT UNSIGNED,
	away_team_id INT,
	away_team_score TINYINT UNSIGNED,
	tournament_id INT NOT NULL,
	match_date DATE,
	match_time TIME,
	match_order TINYINT UNSIGNED,
	waiting_home_team VARCHAR(255),
	waiting_away_team VARCHAR(255),
	home_team_extra_time_score TINYINT UNSIGNED,
	away_team_extra_time_score TINYINT UNSIGNED,
	home_team_penalty_score TINYINT UNSIGNED,
	away_team_penalty_score TINYINT UNSIGNED,
	round_id INT,
	round_order TINYINT UNSIGNED,
	stage_id INT,
	stage_order TINYINT UNSIGNED,
	FOREIGN KEY (home_team_id) REFERENCES team(id),
	FOREIGN KEY (away_team_id) REFERENCES team(id),
	FOREIGN KEY (tournament_id) REFERENCES tournament(id),
	FOREIGN KEY (round_id) REFERENCES `group`(id),
	FOREIGN KEY (stage_id) REFERENCES `group`(id)
);

INSERT INTO `match` (home_team_id, away_team_id, tournament_id, match_date, match_time, match_order, round_id, stage_id)
VALUES (23, 17, 1, '2018-06-14', '180000', 1, 41, 39),
	(8, 32, 1, '2018-06-15', '170000', 2, 41, 39),
	(4, 6, 1, '2018-06-15', '130000', 3, 41, 39),
	(9, 14, 1, '2018-06-15', '100000', 4, 41, 39),
	(21, 13, 1, '2018-06-16', '050000', 5, 41, 39),
	(31, 19, 1, '2018-06-16', '110000', 6, 41, 39),
	(3, 22, 1, '2018-06-16', '080000', 7, 41, 39),
	(18, 10, 1, '2018-06-16', '140000', 8, 41, 39),
	(1, 26, 1, '2018-06-17', '130000', 9, 41, 39),
	(27, 24, 1, '2018-06-17', '070000', 10, 41, 39),
	(2, 28, 1, '2018-06-17', '100000', 11, 41, 39),
	(25, 16, 1, '2018-06-18', '070000', 12, 41, 39),
	(5, 29, 1, '2018-06-18', '100000', 13, 41, 39),
	(12, 20, 1, '2018-06-18', '130000', 14, 41, 39),
	(7, 11, 1, '2018-06-19', '100000', 15, 41, 39),
	(30, 15, 1, '2018-06-19', '070000', 16, 41, 39),
	(23, 8, 1, '2018-06-19', '130000', 17, 41, 39),
	(32, 17, 1, '2018-06-20', '100000', 18, 41, 39),
	(4, 9, 1, '2018-06-20', '070000', 19, 41, 39),
	(14, 6, 1, '2018-06-20', '130000', 20, 41, 39),
	(21, 31, 1, '2018-06-21', '100000', 21, 41, 39),
	(19, 13, 1, '2018-06-21', '070000', 22, 41, 39),
	(3, 18, 1, '2018-06-21', '130000', 23, 41, 39),
	(10, 22, 1, '2018-06-22', '100000', 24, 41, 39),
	(1, 27, 1, '2018-06-22', '070000', 25, 41, 39),
	(24, 26, 1, '2018-06-22', '130000', 26, 41, 39),
	(2, 25, 1, '2018-06-23', '130000', 27, 41, 39),
	(16, 28, 1, '2018-06-23', '100000', 28, 41, 39),
	(5, 12, 1, '2018-06-23', '070000', 29, 41, 39),
	(20, 29, 1, '2018-06-24', '070000', 30, 41, 39),
	(7, 30, 1, '2018-06-24', '130000', 31, 41, 39),
	(15, 11, 1, '2018-06-24', '100000', 32, 41, 39),
	(32, 23, 1, '2018-06-25', '090000', 33, 41, 39),
	(17, 8, 1, '2018-06-25', '090000', 34, 41, 39),
	(14, 4, 1, '2018-06-25', '130000', 35, 41, 39),
	(6, 9, 1, '2018-06-25', '130000', 36, 41, 39),
	(19, 21, 1, '2018-06-26', '090000', 37, 41, 39),
	(13, 31, 1, '2018-06-26', '090000', 38, 41, 39),
	(10, 3, 1, '2018-06-26', '130000', 39, 41, 39),
	(22, 18, 1, '2018-06-26', '130000', 40, 41, 39),
	(24, 1, 1, '2018-06-27', '130000', 41, 41, 39),
	(26, 27, 1, '2018-06-27', '130000', 42, 41, 39),
	(16, 2, 1, '2018-06-27', '090000', 43, 41, 39),
	(28, 25, 1, '2018-06-27', '090000', 44, 41, 39),
	(20, 5, 1, '2018-06-28', '130000', 45, 41, 39),
	(29, 12, 1, '2018-06-28', '130000', 46, 41, 39),
	(15, 7, 1, '2018-06-28', '090000', 47, 41, 39),
	(11, 30, 1, '2018-06-28', '090000', 48, 41, 39);

INSERT INTO `match` (tournament_id, match_date, match_time, match_order, waiting_home_team, waiting_away_team, round_id, stage_id)
VALUES (1, '2018-06-30', '090000', 49, '1C', '2D', 42, 40),
	(1, '2018-06-30', '130000', 50, '1A', '2B', 42, 40),
	(1, '2018-07-01', '090000', 51, '1B', '2A', 42, 40),
	(1, '2018-07-01', '130000', 52, '1D', '2C', 42, 40),
	(1, '2018-07-02', '090000', 53, '1E', '2F', 42, 40),
	(1, '2018-07-02', '130000', 54, '1G', '2H', 42, 40),
	(1, '2018-07-03', '090000', 55, '1F', '2E', 42, 40),
	(1, '2018-07-03', '130000', 56, '1H', '2G', 42, 40),
	(1, '2018-07-06', '090000', 57, 'W49', 'W50', 43, 40),
	(1, '2018-07-06', '130000', 58, 'W53', 'W54', 43, 40),
	(1, '2018-07-07', '090000', 59, 'W55', 'W56', 43, 40),
	(1, '2018-07-07', '130000', 60, 'W51', 'W52', 43, 40),
	(1, '2018-07-10', '130000', 61, 'W57', 'W58', 44, 40),
	(1, '2018-07-11', '130000', 62, 'W59', 'W60', 44, 40),
	(1, '2018-07-14', '090000', 63, 'L61', 'L62', 45, 40),
	(1, '2018-07-15', '100000', 64, 'W61', 'W62', 46, 40);

SELECT t.name AS home_team_name, home_team_score,
	t2.name AS away_team_name, away_team_score,
	match_date, match_time, match_order,
	g.name AS round, g2.name AS stage,
	m.tournament_id
FROM `match` m
	LEFT JOIN team t ON t.id = m.home_team_id
	LEFT JOIN team t2 ON t2.id = m.away_team_id
	LEFT JOIN `group` g ON g.id = m.round_id
	LEFT JOIN `group` g2 ON g2.id = m.stage_id
WHERE m.tournament_id = 1
ORDER BY stage_id, round_id, match_date, match_time;
